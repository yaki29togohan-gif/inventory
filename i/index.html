<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ç‰©å“ç®¡ç†</title>
  <style>
    body{font-family:system-ui,-apple-system,"Segoe UI",sans-serif;margin:16px;line-height:1.4}
    .card{border:1px solid #ddd;border-radius:14px;padding:16px;max-width:520px;margin:auto}
    .title{font-size:18px;font-weight:700;margin-bottom:8px}
    .itemid{font-size:28px;font-weight:800;margin:8px 0}
    .btn{display:block;width:100%;padding:14px;border-radius:12px;border:0;font-size:16px;font-weight:700;margin-top:10px}
    .primary{background:#111;color:#fff}
    .secondary{background:#eee;color:#111}
    .hint{color:#555;font-size:13px;margin-top:10px}
    .toast{color:#0a7; font-size:13px; margin-top:8px; display:none}
  </style>
</head>
<body>
  <div class="card">
    <div class="title">èª²å†… ç‰©å“ç®¡ç†</div>

    <div id="itemName" style="color:#444;">ï¼ˆç‰©å“åã¯ä»»æ„ï¼‰</div>
    <div class="itemid" id="itemId">SET-003</div>

    <button class="btn secondary" id="copyBtn">ğŸ“‹ ç‰©å“IDã‚’ã‚³ãƒ”ãƒ¼</button>
    <div class="toast" id="toast">ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ</div>

    <a id="slackLink" href="#" style="text-decoration:none;">
      <button class="btn primary">âœ… Slackã§ç™»éŒ²ã™ã‚‹ï¼ˆãƒãƒ£ãƒ³ãƒãƒ«ã‚’é–‹ãï¼‰</button>
    </a>

    <div class="hint">
      Slackã§ã€Œè²¸å‡ºç™»éŒ²ã€ã¾ãŸã¯ã€Œè¿”å´å—é ˜ã€ãƒ•ã‚©ãƒ¼ãƒ ã‚’é–‹ãã€ç‰©å“IDã‚’è²¼ã‚Šä»˜ã‘ã¦ç™»éŒ²ã—ã¦ãã ã•ã„ã€‚<br/>
      SlackãŒé–‹ã‹ãªã„å ´åˆï¼šãƒãƒ£ãƒ³ãƒãƒ«ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã„ã¦ãã ã•ã„ï¼ˆPCã§ã‚‚å¯ï¼‰ã€‚
    </div>

    <div class="hint" style="margin-top:8px;">
      <a id="slackWeb" href="#" target="_blank" rel="noopener">Slackã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã</a>
    </div>
  </div>

<script>
  // 1) URLã‹ã‚‰ item_id ã‚’å–ã‚‹ï¼ˆ/i/SET-003 å½¢å¼ã‚’æƒ³å®šï¼‰
  const pathParts = location.pathname.split("/").filter(Boolean);
  const itemId = pathParts.length >= 2 && pathParts[0] === "i" ? pathParts[1] : "UNKNOWN";
  document.getElementById("itemId").textContent = itemId;

  // 2) Slackãƒªãƒ³ã‚¯ã‚’è¨­å®šï¼ˆã‚ãªãŸã®ç’°å¢ƒã®IDã«ç½®æ›ï¼‰
  const TEAM_ID = "T01234567";
  const CHANNEL_ID = "C089ABCDE";

  const slackDeep = `slack://channel?team=${TEAM_ID}&id=${CHANNEL_ID}`;
  const slackWeb  = `https://app.slack.com/client/${TEAM_ID}/${CHANNEL_ID}`;

  document.getElementById("slackLink").href = slackDeep;
  document.getElementById("slackWeb").href = slackWeb;

  // 3) ç‰©å“IDã‚³ãƒ”ãƒ¼
  const toast = document.getElementById("toast");
  document.getElementById("copyBtn").addEventListener("click", async () => {
    try{
      await navigator.clipboard.writeText(itemId);
      toast.style.display = "block";
      setTimeout(()=> toast.style.display = "none", 1200);
    }catch(e){
      alert("ã‚³ãƒ”ãƒ¼ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚ç‰©å“IDã‚’é•·æŠ¼ã—ã—ã¦ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„ã€‚");
    }
  });
</script>
</body>
</html>
