<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ç‰©å“ç®¡ç†</title>
  <style>
    body{font-family:system-ui,-apple-system,"Segoe UI",sans-serif;margin:16px;line-height:1.4}
    .card{border:1px solid #ddd;border-radius:14px;padding:16px;max-width:520px;margin:auto}
    .title{font-size:18px;font-weight:700;margin-bottom:8px}
    .itemid{font-size:28px;font-weight:800;margin:8px 0}
    .btn{
      display:block;width:100%;padding:14px;border-radius:12px;
      border:0;font-size:16px;font-weight:700;margin-top:10px;
      cursor:pointer;text-align:center;text-decoration:none
    }
    .primary{background:#111;color:#fff}
    .secondary{background:#eee;color:#111}
    .hint{color:#555;font-size:13px;margin-top:10px}
    .row{display:flex; gap:10px; margin-top:10px}
    .row a{flex:1}
  </style>
</head>

<body>
  <div class="card">
    <div class="title">èª²å†… ç‰©å“ç®¡ç†</div>

    <!-- ç‰©å“åã¯ä»»æ„ -->
    <div id="itemName" style="color:#444;">ï¼ˆç‰©å“åã¯ä»»æ„ï¼‰</div>

    <!-- ç‰©å“IDè¡¨ç¤º -->
    <div class="itemid" id="itemId">UNKNOWN</div>

    <!-- èª¬æ˜ï¼ˆæœ€å°é™ï¼‰ -->
    <div class="hint">
      ä¸‹ã®ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ Slack ãŒé–‹ãã€è²¸å‡ºï¼è¿”å´ã®å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚<br/>
      ï¼ˆæœªãƒ­ã‚°ã‚¤ãƒ³ã®å ´åˆã¯ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ï¼‰
    </div>

    <!-- Slack Link Trigger -->
    <div class="row">
      <a id="checkoutLink" class="btn primary" href="#">
        âœ… è²¸ã—å‡ºã™
      </a>
      <a id="checkinLink" class="btn secondary" href="#">
        ğŸ“¦ è¿”å´ã‚’å—ã‘å–ã‚‹
      </a>
    </div>

    <!-- Debugï¼ˆå‹•ä½œç¢ºèªä¸­ã®ã¿ã€‚ä¸è¦ãªã‚‰å‰Šé™¤OKï¼‰ -->
    <div class="hint" style="margin-top:12px;font-size:12px;">
      Debug: <span id="debug"></span>
    </div>
  </div>

<script>
  // =========================
  // è¨­å®šï¼ˆè¦ç½®æ›ï¼‰
  // =========================

  // Slack Link Trigger IDï¼ˆSlackå´ã§ç™ºè¡Œã•ã‚ŒãŸæœ¬ç‰©ã‚’å…¥ã‚Œã‚‹ï¼‰
  const CHECKOUT_TRIGGER_ID = "<CHECKOUT_TRIGGER_ID>";
  const CHECKIN_TRIGGER_ID  = "<CHECKIN_TRIGGER_ID>";

  // =========================
  // 1) URLã‹ã‚‰ç‰©å“IDå–å¾—
  // =========================
  // ä¾‹ï¼šhttps://xxxx.github.io/inventory/i/?item=SET-003
  const params = new URLSearchParams(location.search);
  const itemId = params.get("item") || "UNKNOWN";
  document.getElementById("itemId").textContent = itemId;

  // =========================
  // 2) Slack Link Trigger URL ä½œæˆ
  // â€» æœªãƒ­ã‚°ã‚¤ãƒ³ãªã‚‰ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã«èª˜å°ã•ã‚Œã‚‹
  // =========================
  const checkoutUrl =
    `https://r-engineeringteam.slack.com/shortcuts/${encodeURIComponent(CHECKOUT_TRIGGER_ID)}?item=${encodeURIComponent(itemId)}`;
  const checkinUrl  =
    `https://r-engineeringteam.slack.com/shortcuts/${encodeURIComponent(CHECKIN_TRIGGER_ID)}?item=${encodeURIComponent(itemId)}`;

  document.getElementById("checkoutLink").href = checkoutUrl;
  document.getElementById("checkinLink").href  = checkinUrl;

  // Debugè¡¨ç¤º
  document.getElementById("debug").textContent =
    `item=${itemId} / checkout=${checkoutUrl} / checkin=${checkinUrl}`;
</script>
</body>
</html>
