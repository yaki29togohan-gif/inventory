<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ç‰©å“ç®¡ç†</title>
  <style>
    body{font-family:system-ui,-apple-system,"Segoe UI",sans-serif;margin:16px;line-height:1.4}
    .card{border:1px solid #ddd;border-radius:14px;padding:16px;max-width:520px;margin:auto}
    .title{font-size:18px;font-weight:700;margin-bottom:8px}
    .itemid{font-size:28px;font-weight:800;margin:8px 0}
    .btn{
      display:block;width:100%;padding:14px;border-radius:12px;border:0;
      font-size:16px;font-weight:700;margin-top:10px;cursor:pointer;
      text-align:center;text-decoration:none
    }
    .primary{background:#111;color:#fff}
    .secondary{background:#eee;color:#111}
    .hint{color:#555;font-size:13px;margin-top:10px}
    .row{display:flex; gap:10px; margin-top:10px}
    .row a{flex:1}
    .small{font-size:12px;color:#666;margin-top:8px}
    .link{color:#0b66c3;text-decoration:underline}
  </style>
</head>

<body>
  <div class="card">
    <div class="title">èª²å†… ç‰©å“ç®¡ç†</div>

    <div id="itemName" style="color:#444;">ï¼ˆç‰©å“åã¯ä»»æ„ï¼‰</div>
    <div class="itemid" id="itemId">UNKNOWN</div>

    <div class="hint">
      ã€Œè²¸ã—å‡ºã™ / è¿”å´ã‚’å—ã‘å–ã‚‹ã€ã‚’æŠ¼ã™ã¨ Slack ã®å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ãŒé–‹ãã¾ã™ã€‚<br/>
      é–‹ã‹ãªã„å ´åˆã¯ã€ä¸‹ã®ã€ŒSlackã«ãƒ­ã‚°ã‚¤ãƒ³ã€ã‚’æŠ¼ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³å¾Œã€ã‚‚ã†ä¸€åº¦ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚
    </div>

    <div class="row">
      <a id="checkoutLink" class="btn primary" href="#">âœ… è²¸ã—å‡ºã™</a>
      <a id="checkinLink"  class="btn secondary" href="#">ğŸ“¦ è¿”å´ã‚’å—ã‘å–ã‚‹</a>
    </div>

    <!-- ã“ã‚ŒãŒ â€œã•ã£ãã®ãƒ­ã‚°ã‚¤ãƒ³èª˜å°â€ -->
    <div class="small">
      ğŸ‘‰ <a id="slackLogin" class="link" href="#" target="_blank" rel="noopener">Slackã«ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ï¼ˆé–‹ã‹ãªã„å ´åˆã®ã¿ï¼‰</a>
    </div>

    <!-- Debugï¼ˆä¸è¦ãªã‚‰ä¸¸ã”ã¨æ¶ˆã—ã¦OKï¼‰ -->
    <div class="small" style="margin-top:10px;">
      Debug: <span id="debug"></span>
    </div>
  </div>

<script>
  // =========================
  // è¨­å®šï¼ˆã“ã“ã ã‘ç½®ãæ›ãˆï¼‰
  // =========================

  // 1) Slackã®Link Trigger URLï¼ˆSlackã®ç®¡ç†ç”»é¢ã§è¡¨ç¤ºã•ã‚Œã‚‹URLã‚’ãã®ã¾ã¾è²¼ã‚‹ï¼‰
  // ä¾‹ï¼‰https://r-engineeringteam.slack.com/shortcuts/TRxxxxxxxxxxxx
  const CHECKOUT_TRIGGER_URL = "https://r-engineeringteam.slack.com/shortcuts/TRxxxxxxxxxxxx"; // è²¸å‡ºï¼ˆè¦ç½®æ›ï¼‰
  const CHECKIN_TRIGGER_URL  = "https://r-engineeringteam.slack.com/shortcuts/TRyyyyyyyyyyyy"; // è¿”å´ï¼ˆè¦ç½®æ›ï¼‰

  // 2) ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ãƒ­ã‚°ã‚¤ãƒ³URL
  const SLACK_WORKSPACE_URL = "https://r-engineeringteam.slack.com";

  // =========================
  // ç‰©å“IDå–å¾—ï¼ˆ?item=SET-003ï¼‰
  // =========================
  const params = new URLSearchParams(location.search);
  const itemId = params.get("item") || "UNKNOWN";
  document.getElementById("itemId").textContent = itemId;

  // =========================
  // ãƒœã‚¿ãƒ³ãƒªãƒ³ã‚¯è¨­å®š
  // =========================
  // Trigger URLã« item ã‚’ä»˜ä¸ï¼ˆSlackã‚¢ãƒ—ãƒªå´ã§å—ã‘å–ã‚‹ï¼‰
  const checkoutUrl = `${CHECKOUT_TRIGGER_URL}?item=${encodeURIComponent(itemId)}`;
  const checkinUrl  = `${CHECKIN_TRIGGER_URL}?item=${encodeURIComponent(itemId)}`;

  document.getElementById("checkoutLink").href = checkoutUrl;
  document.getElementById("checkinLink").href  = checkinUrl;

  // ãƒ­ã‚°ã‚¤ãƒ³ãƒªãƒ³ã‚¯ï¼ˆã•ã£ãã®å‹•ä½œï¼‰
  document.getElementById("slackLogin").href = SLACK_WORKSPACE_URL;

  // Debug
  document.getElementById("debug").textContent = `item=${itemId} / checkout=${checkoutUrl} / checkin=${checkinUrl}`;
</script>
</body>
</html>
