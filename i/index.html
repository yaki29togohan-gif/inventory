<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>åŒ»é–‹ãƒ»ç‰©å“ç®¡ç†</title>
  <style>
    body{font-family:system-ui,-apple-system,"Segoe UI",sans-serif;margin:16px;line-height:1.4}
    .card{border:1px solid #ddd;border-radius:14px;padding:16px;max-width:520px;margin:auto}
    .title{font-size:18px;font-weight:700;margin-bottom:8px}
    .itemid{font-size:28px;font-weight:800;margin:8px 0}
    .btn{display:block;width:100%;padding:14px;border-radius:12px;border:0;font-size:16px;font-weight:700;margin-top:10px;cursor:pointer}
    .primary{background:#111;color:#fff}
    .secondary{background:#eee;color:#111}
    .hint{color:#555;font-size:13px;margin-top:10px}
    .row{display:flex; gap:10px; margin-top:10px}
    .row a{flex:1; text-decoration:none}
    ol.hint{padding-left:18px}
    .small{font-size:12px;color:#666}
  </style>
</head>

<body>
  <div class="card">
    <div class="title">åŒ»é–‹ãƒ»ç‰©å“ç®¡ç†</div>

    <!-- ç‰©å“åã¯ä»»æ„ï¼ˆã‚ã¨ã§ãƒã‚¹ã‚¿é€£æºã—ã¦ã‚‚OKï¼‰ -->
    <div id="itemName" style="color:#444;">ï¼ˆç‰©å“åã¯ä»»æ„ï¼‰</div>

    <!-- URLã® ?item=SET-003 ã‚’è¡¨ç¤ºï¼ˆç¢ºèªç”¨ï¼‰ -->
    <div class="itemid" id="itemId">UNKNOWN</div>

    <!-- Slack Link Trigger ã‚’å©ããƒœã‚¿ãƒ³ï¼ˆè²¸å‡º / è¿”å´ï¼‰ -->
    <div class="row">
      <a id="checkoutLink" href="#">
        <button class="btn primary" type="button">âœ… è²¸ã—å‡ºã™ï¼ˆSlackãŒé–‹ãã¾ã™ï¼‰</button>
      </a>
      <a id="checkinLink" href="#">
        <button class="btn secondary" type="button">ğŸ“¦ è¿”å´ã‚’å—ã‘å–ã‚‹ï¼ˆSlackãŒé–‹ãã¾ã™ï¼‰</button>
      </a>
    </div>

<script>
  // =========================
  // è¨­å®šï¼ˆã‚ãªãŸã®ç’°å¢ƒã«åˆã‚ã›ã¦ç½®æ›ï¼‰
  // =========================

  // Slack Link Trigger IDï¼ˆSlackå´ã§ç™ºè¡Œã•ã‚Œã‚‹ã‚‚ã®ï¼‰
  // ä¾‹: TR1234567890 ã®ã‚ˆã†ãªå½¢å¼
  const CHECKOUT_TRIGGER_ID = "<CHECKOUT_TRIGGER_ID>"; // è²¸å‡ºç”¨ï¼ˆç½®æ›å¿…é ˆï¼‰
  const CHECKIN_TRIGGER_ID  = "<CHECKIN_TRIGGER_ID>";  // è¿”å´ç”¨ï¼ˆç½®æ›å¿…é ˆï¼‰

  // ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®ãƒ­ã‚°ã‚¤ãƒ³URLï¼ˆTEAM_IDä¸è¦ï¼‰
  const SLACK_WORKSPACE_URL = "https://r-engineeringteam.slack.com";

  // ç‰©å“ç®¡ç†ãƒãƒ£ãƒ³ãƒãƒ«URLï¼ˆTEAM_IDä¸è¦ï¼‰
  const SLACK_CHANNEL_URL = "https://r-engineeringteam.slack.com/archives/C04TZQE4W95";

  // =========================
  // 1) QRã®URLã‹ã‚‰ item ã‚’èª­ã‚€ï¼ˆGitHub Pageså‘ã‘ï¼‰
  // =========================
  // QRä¾‹: https://.../inventory/i/?item=SET-003
  const params = new URLSearchParams(location.search);
  const itemId = params.get("item") || "UNKNOWN";
  document.getElementById("itemId").textContent = itemId;

  // =========================
  // 2) Slackãƒªãƒ³ã‚¯ã‚’è¨­å®š
  // =========================
  // Link Trigger URLï¼ˆSlackå´ã§ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ãã€item ã‚’å—ã‘å–ã‚‹æƒ³å®šï¼‰
  const checkoutUrl = `https://r-engineeringteam.slack.com/shortcuts/${encodeURIComponent(CHECKOUT_TRIGGER_ID)}?item=${encodeURIComponent(itemId)}`;
ã€€const checkinUrl  = `https://r-engineeringteam.slack.com/shortcuts/${encodeURIComponent(CHECKIN_TRIGGER_ID)}?item=${encodeURIComponent(itemId)}`;


  document.getElementById("checkoutLink").href = checkoutUrl;
  document.getElementById("checkinLink").href  = checkinUrl;

  // ãƒ­ã‚°ã‚¤ãƒ³èª˜å°ã¨ãƒãƒ£ãƒ³ãƒãƒ«ç›´ãƒªãƒ³ã‚¯
  document.getElementById("slackLogin").href = SLACK_WORKSPACE_URL;
  document.getElementById("slackChannelWeb").href = SLACK_CHANNEL_URL;

  // ï¼ˆä»»æ„ï¼‰ãƒ‡ãƒãƒƒã‚°è¡¨ç¤º
  document.getElementById("debug").textContent =
    `item=${itemId} / checkout=${checkoutUrl} / checkin=${checkinUrl}`;
</script>
</body>
</html>
